(self.webpackChunkangular=self.webpackChunkangular||[]).push([[580],{6580:function(e,t,n){"use strict";n.r(t),n.d(t,{AccountModule:function(){return N}});var o,r=n(88084),a=n(61116),i=n(31041),c=n(42693),u=n(75470),l=n(63337),s=n(2479),p=n(30007),d=n(93820),f=n(53207),g=n(78828),m=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)i.push(o.value)}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},v=function(e,t){for(var n=0,o=t.length,r=e.length;n<o;n++,r++)e[r]=t[n];return e};function y(e,t){if(1&e&&(d.TgZ(0,"span",3),d._uU(1),d.qZA()),2&e){var n=d.oxw().$implicit,o=d.oxw(2);d.ekj("d-block",!!o.control.errors[n.name]),d.xp6(1),d.hij(" ",o.getValidationErrorMessage(n)," ")}}function Z(e,t){if(1&e&&(d.ynx(0),d.YNc(1,y,2,3,"span",2),d.BQk()),2&e){var n=t.$implicit,o=d.oxw(2);d.xp6(1),d.Q6J("ngIf",!!o.control.errors[n.name])}}function b(e,t){if(1&e&&(d.ynx(0),d.YNc(1,Z,2,1,"ng-container",1),d.BQk()),2&e){var n=d.oxw();d.xp6(1),d.Q6J("ngForOf",n.validationErrors)}}var T=function(e){function t(t,n){var o=e.call(this,t)||this;return o._renderer=n,o.defaultValidationErrors=[{name:"required",localizationKey:"ThisFieldIsRequired"},{name:"minlength",localizationKey:"PleaseEnterAtLeastNCharacter",propertyKey:"requiredLength"},{name:"maxlength",localizationKey:"PleaseEnterNoMoreThanNCharacter",propertyKey:"requiredLength"},{name:"email",localizationKey:"InvalidEmailAddress"},{name:"pattern",localizationKey:"InvalidPattern",propertyKey:"requiredPattern"},{name:"validateEqual",localizationKey:"PairsDoNotMatch"}],o.validationErrors=o.defaultValidationErrors,o}return m(t,e),Object.defineProperty(t.prototype,"customValidationErrors",{set:function(e){if(e&&e.length>0){var t=this.defaultValidationErrors.filter(function(t){return!e.find(function(e){return e.name===t.name})});this.validationErrors=v(v([],h(t)),h(e))}},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var e=this;this.controlEl&&this.control.valueChanges.subscribe(function(){e.control.valid&&(e.control.dirty||e.control.touched)&&e._renderer.removeClass(e.controlEl,"is-invalid")})},t.prototype.getValidationErrorMessage=function(e){return this.controlEl&&this._renderer.addClass(this.controlEl,"is-invalid"),e.localizationKey},t.\u0275fac=function(e){return new(e||t)(d.Y36(d.zs3),d.Y36(d.Qsj))},t.\u0275cmp=d.Xpm({type:t,selectors:[["abp-validation-summary"]],inputs:{control:"control",controlEl:"controlEl",customValidationErrors:"customValidationErrors"},features:[d.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["class","error invalid-feedback",3,"d-block",4,"ngIf"],[1,"error","invalid-feedback"]],template:function(e,t){1&e&&d.YNc(0,b,2,1,"ng-container",0),2&e&&d.Q6J("ngIf",t.control.invalid&&(t.control.dirty||t.control.touched))},directives:[a.O5,a.sg],encapsulation:2}),t}(s.c),S=n(84369),_=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),q=function(e){function t(t,n,o,r,a){var i=e.call(this,t)||this;return i.authService=n,i.authenService=o,i.googleAuthService=r,i.router=a,i.submitting=!1,i.processLogin=!1,i}return _(t,e),t.prototype.ngOnInit=function(){var e=this;this.googleAuthService.authState.subscribe(function(t){e.user=t,e.loggedIn=null!=t,e.loggedIn&&e.processLogin&&e.authenticateGoogle(e.user)})},t.prototype.login=function(){var e=this;this.authenService.login().subscribe(function(t){e.router.navigate("ROLE_STUDENT"==t.role||"ROLE_ADMIN"==t.role?["app/home"]:["app/manage-request"]),e.authenService.userRole=t.role,e.authenService.userId=t.id,e.authenService.clubMember=t.clubmember,e.authenService.setToken(t.jwtToken),e.authenService.requestTypeStatus=t.requestTypeStatus,localStorage.setItem("userToken",t.jwtToken),localStorage.setItem("userId",t.id),localStorage.setItem("requestTypeStatus",t.requestTypeStatus),localStorage.setItem("clubMember",t.clubmember),localStorage.setItem("userRole",t.role),localStorage.setItem("accountName",t.fullName),e.processLogin=!1},function(){e.router.navigate(["account/login"])})},t.prototype.signInWithGoogle=function(){this.processLogin=!0,this.googleAuthService.signIn(r.tV.PROVIDER_ID)},t.prototype.authenticateGoogle=function(e,t){var n=this;t=t||function(){},this.authenService.account.email=e.email,this.authenService.account.passWord="",this.authenService.account.fullName=e.name,this.authenService.login().subscribe(function(e){n.router.navigate("ROLE_STUDENT"==e.role||"ROLE_ADMIN"==e.role?["app/home"]:["app/manage-request"]),n.authenService.userRole=e.role,n.authenService.userId=e.id,n.authenService.clubMember=e.clubmember,n.authenService.setToken(e.jwtToken),n.authenService.requestTypeStatus=e.requestTypeStatus,localStorage.setItem("userToken",e.jwtToken),localStorage.setItem("userId",e.id),localStorage.setItem("requestTypeStatus",e.requestTypeStatus),localStorage.setItem("clubMember",e.clubmember),localStorage.setItem("userRole",e.role),localStorage.setItem("accountName",e.fullName),n.processLogin=!1},function(){n.router.navigate(["account/login"])})},t.\u0275fac=function(e){return new(e||t)(d.Y36(d.zs3),d.Y36(f.K),d.Y36(g.i),d.Y36(r.xE),d.Y36(l.F0))},t.\u0275cmp=d.Xpm({type:t,selectors:[["ng-component"]],features:[d.qOj],decls:36,vars:13,consts:[[1,"text-center","mb-3"],["novalidate","","autocomplete","off",3,"ngSubmit"],["loginForm","ngForm"],[1,"form-group"],[1,"input-group"],["type","text","name","userNameOrEmailAddress","required","","maxlength","256",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["userNameOrEmailAddressModel","ngModel","userNameOrEmailAddressEl",""],[1,"input-group-append"],[1,"input-group-text"],[1,"fas","fa-user"],[3,"control","controlEl"],["type","password","name","password","maxlength","32",1,"form-control",3,"ngModel","placeholder","ngModelChange"],["passwordModel","ngModel","passwordEl",""],[1,"fas","fa-lock"],["type","text","name","fullName","maxlength","256",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"form-group","row"],[1,"col-md-4"],["type","submit",1,"btn","btn-primary","btn-block"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12","text-center",2,"margin-top","25px"],["mat-flat-button","","type","button","color","primary",2,"width","100%",3,"click"]],template:function(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"h4",0),d._uU(2),d.qZA(),d.TgZ(3,"form",1,2),d.NdJ("ngSubmit",function(){return t.login()}),d.TgZ(5,"div",3),d.TgZ(6,"div",4),d.TgZ(7,"input",5,6),d.NdJ("ngModelChange",function(e){return t.authenService.account.email=e}),d.qZA(),d.TgZ(10,"div",7),d.TgZ(11,"div",8),d._UZ(12,"span",9),d.qZA(),d.qZA(),d.qZA(),d._UZ(13,"abp-validation-summary",10),d.qZA(),d.TgZ(14,"div",3),d.TgZ(15,"div",4),d.TgZ(16,"input",11,12),d.NdJ("ngModelChange",function(e){return t.authenService.account.passWord=e}),d.qZA(),d.TgZ(19,"div",7),d.TgZ(20,"div",8),d._UZ(21,"span",13),d.qZA(),d.qZA(),d.qZA(),d._UZ(22,"abp-validation-summary",10),d.qZA(),d.TgZ(23,"div",3),d.TgZ(24,"div",4),d.TgZ(25,"input",14),d.NdJ("ngModelChange",function(e){return t.authenService.account.fullName=e}),d.qZA(),d.TgZ(26,"div",7),d.TgZ(27,"div",8),d._UZ(28,"span",9),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(29,"div",15),d.TgZ(30,"div",16),d.TgZ(31,"button",17),d._uU(32),d.qZA(),d.qZA(),d.qZA(),d.TgZ(33,"div",18),d.TgZ(34,"button",19),d.NdJ("click",function(){return t.signInWithGoogle()}),d._uU(35," Log In With Google "),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e){var n=d.MAs(8),o=d.MAs(9),r=d.MAs(17),a=d.MAs(18);d.Q6J("@routerTransition",void 0),d.xp6(2),d.Oqu("Log In"),d.xp6(5),d.Q6J("ngModel",t.authenService.account.email)("placeholder","UserNameOrEmail"),d.xp6(6),d.Q6J("control",n)("controlEl",o),d.xp6(3),d.Q6J("ngModel",t.authenService.account.passWord)("placeholder","Password"),d.xp6(6),d.Q6J("control",r)("controlEl",a),d.xp6(3),d.Q6J("ngModel",t.authenService.account.fullName)("placeholder","your name"),d.xp6(7),d.hij(" ","LogIn"," ")}},directives:[i._Y,i.JL,i.F,i.Fj,i.Q7,i.nD,i.JJ,i.On,T,S.lW],encapsulation:2,data:{animation:[(0,p.RP)()]}}),t}(s.c),A=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["account-header"]],decls:4,vars:0,consts:[[1,"login-logo"],["href","/"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"a",1),d.TgZ(2,"b"),d._uU(3,"Capstone Management"),d.qZA(),d.qZA(),d.qZA())},encapsulation:2,changeDetection:0}),e}(),w=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),E=function(e){function t(t){var n=e.call(this,t)||this;return n.currentYear=1,n.versionText="",n}return w(t,e),t.\u0275fac=function(e){return new(e||t)(d.Y36(d.zs3))},t.\u0275cmp=d.Xpm({type:t,selectors:[["account-footer"]],features:[d.qOj],decls:7,vars:3,consts:[[1,"row"],[1,"col-md-12","text-center"],[1,"ml-2"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"small"),d._uU(3),d.TgZ(4,"b",2),d._uU(5),d.qZA(),d._uU(6),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(3),d.hij(" Copyright \xa9 ",t.currentYear," "),d.xp6(2),d.Oqu("Version"),d.xp6(1),d.hij(" ",t.versionText," "))},encapsulation:2,changeDetection:0}),t}(s.c),O=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function x(e,t){1&e&&d._UZ(0,"div",5)}var I=function(e){function t(t,n){var o=e.call(this,t)||this;return o.renderer=n,o}return O(t,e),t.prototype.showTenantChange=function(){return abp.multiTenancy.isEnabled},t.prototype.ngOnInit=function(){this.renderer.addClass(document.body,"login-page")},t.\u0275fac=function(e){return new(e||t)(d.Y36(d.zs3),d.Y36(d.Qsj))},t.\u0275cmp=d.Xpm({type:t,selectors:[["ng-component"]],features:[d.qOj],decls:8,vars:1,consts:[[1,"login-box"],[1,"card","p-2",2,"border-radius","3px"],["class","card-header",4,"ngIf"],[1,"card-body","login-card-body"],[1,"card-footer"],[1,"card-header"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d._UZ(1,"account-header"),d.TgZ(2,"div",1),d.YNc(3,x,1,0,"div",2),d.TgZ(4,"div",3),d._UZ(5,"router-outlet"),d.qZA(),d._UZ(6,"div",4),d.qZA(),d._UZ(7,"account-footer"),d.qZA()),2&e&&(d.xp6(3),d.Q6J("ngIf",t.showTenantChange()))},directives:[A,a.O5,l.lC,E],encapsulation:2}),t}(s.c),M=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[l.Bz.forChild([{path:"",component:I,children:[{path:"login",component:q}]}])],l.Bz]}),e}(),j=n(74095),N=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({providers:[{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!0,providers:[{id:r.tV.PROVIDER_ID,provider:new r.tV("879411761479-734qv2e2efi9f68utvo8catolkcfbe47.apps.googleusercontent.com")}]}}],imports:[[a.ez,i.u5,c.JF,c.Ed,j.m,M,u.zk.forChild(),r.RB]]}),e}()}}]);